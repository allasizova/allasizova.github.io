<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tibetan Buddhist Texts from Khara-Khoto: A Database</title>
    <style>
		body {
            font-family: book antiqua;}
        .container { margin-bottom: 20px; }
		.text-item {
			background-color: #e6ffe6; /* Светло-зеленый для текстов */
			border: 1px solid #ccc; /* Граница вокруг каждого элемента */
			border-radius: 5px; /* Скругление углов для более мягкого внешнего вида */
		}

		.manuscript-item {
			background-color: #e6f2ff; /* Светло-синий для рукописей */
			border: 1px solid #ccc; /* Граница вокруг каждого элемента */
			border-radius: 5px; /* Скругление углов для более мягкого внешнего вида */
		}

		.publication-item {
			background-color: #fff0f0; /* Светло-красный для публикаций */
			border: 1px solid #ccc; /* Граница вокруг каждого элемента */
			border-radius: 5px; /* Скругление углов для более мягкого внешнего вида */
		}
		.text-item, .manuscript-item, .publication-item {
			line-height: 1; /* Устанавливает межстрочный интервал в нормальное состояние, без дополнительного пространства */
		}
		
		.label-alternative-titles {
			color: #083669;
			font-weight: bold;
		}

		.label-notes {
			color: #083669;
			font-weight: bold;
		}
		
		.label-manuscripts {
			color: #083669;
			font-weight: bold;
		}
		
		.label-publications {
			color: #083669;
			font-weight: bold;
		}
		
		.label-collection {
			color: #083669;
			font-weight: bold;
		}
		
		.label-shelfmark {
			color: #083669;
			font-weight: bold;
		}
		
		.manuscript-notes {
			color: #083669;
			font-weight: bold;
		}

		.manuscript-texts {
			color: #083669;
			font-weight: bold;
		}
		
		.manuscript-publications {
			color: #083669;
			font-weight: bold;
		}
		
		.label-authors {
			color: #083669;
			font-weight: bold;
		}
		
		.label-place {
			color: #083669;
			font-weight: bold;
		}
		
		.label-tags {
			color: #083669;
			font-weight: bold;
		}
		
		.label-pub-notes {
			color: #083669;
			font-weight: bold;
		}
    </style>
</head>
<body>
    <h1 style="color: #000000; text-align: center;">
        Tibetan Buddhist Texts from Khara-Khoto:<br>A Database
    </h1>
	<h2 style="text-align: center; font-size: 110%">TEXTS <span id="textsCount"></span></h2>
	<h2 style="text-align: center; font-size: 110%">SOURCES<span id="manuscriptsCount" style="font-size: smaller;"></span></h2>
	<h2 style="text-align: center; font-size: 110%">PUBLICATIONS <span id="publicationsCount" style="font-size: smaller;"></span></h2>
	<div style="text-align: center;">
    <img src="garuda_sm.png" width="200">
	</div>
	
	<div id="tagsContainer" style="text-align: center; margin-top: 20px;">
		<h2>Filter Publications by Tags</h2>
		<!-- Buttons will be added here dynamically -->
	</div>
	<div id="filteredPublicationsContainer" class="container">
		<h2 style="text-align: center;">Results</h2>
	</div>
	
	<div id="textsContainer" class="container">
    <h2 style="text-align: center;">TEXTS</h2>
	</div>
    <div id="manuscriptsContainer" class="container">
    <h2 style="text-align: center;">SOURCES<br>(manuscripts and blockprints)</h2>
	</div>
	<div id="publicationsContainer" class="container">
    <h2 style="text-align: center;">PUBLICATIONS</h2>
	</div>

    <script>
        const texts = [
            {
                textId: 1,
                textTitle: "Uṣṇīṣavijayā-dhāraṇīsūtra",
                textAlternativeTitle: "uṣṇīṣavijayā nāma dhāraṇī anuśaṃsasahitasūtrāt saṃgṛhītā, gtsug tor rnam par rgyal ma’i gzungs phan yon dang bcas pa’ | mdo’ las btus pa",
                manuscriptIds: [2, 4],
                publicationIds: [1],
                textNotes: "Version produced in the Tangut state",
            },
			{
                textId: 2,
                textTitle: "Mañjuśrījñānasattvasyaparamārthanāmasaṃgīti",
                textAlternativeTitle: "",
                manuscriptIds: [3, 1],
                publicationIds: [1],
                textNotes: "",
            }
            // Добавьте дополнительные тексты здесь
        ];
        const manuscripts = [
            {
                manuscriptId: 1,
                manuscriptTitle: "A collection of Buddhist texts",
                collection: ["St. Petersburg"],
                shelfmark: "Kh. Tib. 16",
                textIds: [],
                publicationIds: [],
                manuscriptNotes: "Fragment of a manuscript; pothi; <i>dbu chen</i>; 89 folios. Two volumes, the folios of the second volume are marked with the letter <i>ka</i>.<br><b>Volume 1</b>: folios 2, 4, 6, 8–10, 18, 22, 33, 34, 37, 39–41, 46–49, 52, 53, 56, 60–[62], 64–67, 67доп, 68–71, 73, 74, 76–89, 99, 100.<br><b>Volume 2</b>: folios 1–14, 16, 17, 19–22, 25, 26, 27/28, 29–[32], 34, [35], 38, 39, 43, [45], 46, 48, 49, 52.<br><b>Volume 1</b>: 1. f. <...>2a1—2b5<...>: ’phags pa sangs rgyas rjes su dran pa (without beginning and end); 2. <...>4a1—4b3: chos rjes su dran pa (without beginning); 3. 4b3—4b5<...>: dge ’dun rjes su dran pa (without end); 4. <...>6a1—10b5<...>: byang chub ltung bshags (without beginning and end); 5. <...>18a1—41b5<...>: ’jam dpal ye shes sems dpa’i don dam pa’i mtshan yang dag par brjod pa (without beginning and end); 6. <...>46a1—49b5<...>: ’phags pa ’jam dpal gyi mtshan brgya rtsa brgyad pa zhes bya ba (without beginning and end); 7. <...>52a1—52а3: rje btsun ’phags pa ’jam dpal gyi shes rab dang blo ’phel ba zhes bya ba’i gzungs (without beginning); 8. 52a3—52b5: ’phags pa las kyi sgrib pa thams cad rnam par sbyong ba zhes bya ba’i gzungs; 9. 53a1—53b2: ngan song thams cad yongs su sbyong ba’i gzungs; 10. 53b2—53b5: yon yongs su dag pa’i gzungs; 11. <...>56a1—100b5: ’phags pa shes rab kyi pha rol tu phyin pa sdud pa tshigs su bcad pa (first part, without beginning).<br><b>Volume 2</b>: 1a1—22b5: ’phags pa shes rab kyi pha rol tu phyin pa sdud pa tshigs su bcad pa (second part); 12. <...>25a1—[35]b5<...>: ’phags pa bzang po spyod pa’i smon lam gyi rgyal po (without beginning and end); 13. 38a1—39b5<...>: stong chen mo rab tu ’joms pa las gsungs pa’i smon lam (without end); 14. <...>43a1—[45]b2: mdzad pa bcu gnyis kyi bkra shis tshigs su bcad pa (without beginning); 15. 46a1—49b5: ’phags pa byams pa’i smon lam; 16. 52a1—4: the hundred syllable Vajrasattva mantra.",
            },
			{
                manuscriptId: 2,
                manuscriptTitle: "A collection of two dhāraṇīs with the Emperor Renzong’s afterword, dated from 1149 or a few years later",
                collection: ["St. Petersburg"],
                shelfmark: "Kh. Tib. 63, 64, 67, 68",
                textIds: [1],
                publicationIds: [1],
                manuscriptNotes: "Fragments of a block print; black ink; folios were printed in spreads with foliation in Chinese and with <i>baikou</i>, the original number of folios is unknown; the following folios have survived (sometimes only the left or right halves):<br>Text 1 (’phags pa spyan ras gzigs dbang phyug thugs rje chen po’I gzungs phan yon dang bcas pa’ mdo ltar btus pa): 2l, 3–5, 6l, 9r, 10–12, 13l, 23r, 24–26, 27l<br>Text 2 (gtsug tor rnam par rgyal ma’I gzungs phan yon dang bcas pa’ mdo ltar btus pa): 34r, 35l, 37r, 38l, 40r, 41–44, 45r, 49r, 50, 51, 52, 53, 54l<br>Text 3 (the Emperor Renzong’s afterword): 56r, 57, 58, 59l, 60r, 61l",
            },
			{
                manuscriptId: 3,
                manuscriptTitle: "Mañjuśrījñānasattvasyaparamārthanāmasaṃgīti, Vāgīśvarastotra",
                collection: ["St. Petersburg"],
                shelfmark: "Kh. Tib. 127",
                textIds: [],
                publicationIds: [2],
                manuscriptNotes: "Fragment, block print; vertical concertina-style book. 10 folios without foliation. Double bars on the sides (12.7 cm). Chinese foliation ‘22’ (廿二) on internal fold.<br>1. ’Jam dpal ye shes sems dpa’i don dam pa’i mtshan yang dag par brjod pa (Mañjuśrījñānasattvasyaparamārthanāmasaṃgīti);<br>2. Ngag gi dbang phyug la bstod pa (Vāgīśvarastotra).",
            },
			{
                manuscriptId: 4,
                manuscriptTitle: "A collection of Buddhist texts",
                collection: ["St. Petersburg"],
                shelfmark: "Kh. Tib. 126, 159, 62",
                textIds: [1],
                publicationIds: [],
                manuscriptNotes: "Fragment of a manuscript; pothi; dbu chen; 31 folio.<br>KA: folios 1—7, 9—12, 31, 32, 34—37 (additional draft of the folio 36), 39—50.<br>PHA: 1 folio (without foliation).<br> KA: 1. л. 1a1—12a5: dpal lha mo gtsug tor rol pa’i ta+ntra; 2. 12b1—5: [gtsug tor]; 3. <...>31a1—42b5: ’phags pa spyan ras gzigs dbang phyug thugs rje chen po’i gzungs phan yon dang bcas pa zhes bya ba’i mdo las btus pa (without beginning); 4. [42]a1—50b5: [gtsug tor rnam par rgyal ma’I gzungs phan yon dang bcas pa’ mdo ltar btus pa] (without beginning);<br>PHA: [1]a1—b5: ’phags ma ’od zer can zhes bya ba’i gzungs (without end).",
            }
            // Добавьте дополнительные рукописи здесь
        ];
		const publications = [
			{
				publicationId: 1,
				authors: ["Hamanaka S.", "Sizova A."],
				publicationTitle: "Imperial Postscript to the Tangut, Chinese and Tibetan Editions of the Dhāraṇī-sūtras in the Collection of the IOM, RAS.",
				publicationPlace: "WMO. Vol. 6, No. 2(12), 2020. P. 65–92.",
				textIds: [1],
				manuscriptIds: [1],
				tags: ["item description", "Renzong"],
				url: "https://journals.eco-vector.com/2410-0145/article/view/48894",
				publicationNotes: "Three parallel editions of dhāraṇī-sūtras in Tangut, Chinese and Tibetan languages were published in the Tangut state in 1149. The Tibetan edition is of particular importance, because until recently specimens of printing in Tibetan, that could belong to an earlier date, have not been found anywhere. All the editions are equal in terms of their contents and contain the postscript written by the Emperor Renzong. The main goal of the article is to introduce the previously unpublished Tibetan text of the postscript in correspondence with the Tangut and Chinese versions. Besides, the article provides information about the study, preservation state, and codicology of all the three editions.",
			},
			{
				publicationId: 2,
				authors: ["Turanskaya A."],
				publicationTitle: "A Tibetan Block Print in the Collection of Tibetan Texts from Khara-khoto of the IOM, RAS.",
				publicationPlace: "Pis’mennye pamiatniki Vostoka. 2021, volume 18, no. 2 (issue 45). P. 5–23.",
				textIds: [1],
				manuscriptIds: [3],
				tags: ["item description", "Mañjuśrī"],
				url: "http://www.orientalstudies.ru/rus/images/pdf/journals/PPV_18_2_45_2021_01_turanskaya.pdf",
				publicationNotes: "(In Russian) Fragments of Tibetan manuscripts and block prints from Khara-Khoto, which were transferred to the Asiatic Museum after P.K. Kozlov’s Mongolian-Sichuan Expedition, have been insufficiently studied. As a result of the cataloguing project initiated by researchers of the IOM, RAS, in 2018, an unknown Tibetan block print drew our attention. The preserved fragment includes two texts dedicated to the Buddhist deity Mañjuśrī. This paper presents a brief archaeographic description of the block print, a transliteration and translation of the surviving parts of the texts.",
			},
			{
				publicationId: 3,
				authors: ["Linrothe R."],
				publicationTitle: "Peripheral Visions: On Recent Finds of Tangut Buddhist Art.",
				publicationPlace: "Monumenta Serica: Journal of Oriental Studies XLIII (1995): 235–262.",
				textIds: [],
				manuscriptIds: [],
				tags: ["Tangut art", "Baisikou 拜寺口 pagoda", "Hongfo 宏佛 pagoda", "Dunhuang caves", "Tangut sculpture", "Renzong", "Düsum Khyenpa (1st Karmapa)", "Tsangpopa", "two Buddhisms in Xi Xia"],
				url: "https://www.jstor.org/stable/40727067",
				publicationNotes: "Contents<br><b>Introduction</b><br>Recent finds in the Ningxia province: Baisikou 拜寺口 and Hongfo 宏佛塔 pagodas.<br><b>Background: The Da Xia State and its Patronage of Buddhist Art.</b><br><b>Chinese and Himalayan modalities.</b><br>“The finds at Khara Khoto and from the capital region demonstrate conclusively that the two (Sinitic and Tibetan) styles were for the most part kept formally distinct, yet were ritually employed simultaneously in the entire region” <…><br><b>Tangut Proposals, Contemporary Disposals.<b><br><b/>Buddhist Heterotopia: The Tangut Resolution.</b>",
			},
			{
				publicationId: 4,
				authors: ["Zhu Qi-xin 朱啟新"],
				publicationTitle: "Bronze Buddhist figures of the Late Western Xia dynasty.",
				publicationPlace: "Orientations 22, no. 10 (1991): 62–64.",
				textIds: [],
				manuscriptIds: [],
				tags: ["Tangut art", "Tangut sculpture"],
				url: "",
				publicationNotes: "need a copy",
			},
			{
				publicationId: 5,
				authors: ["Linrothe R."],
				publicationTitle: "Ushnīshavijayā and the Tangut Cult of the Stūpa at Yü-lin Cave 3.",
				publicationPlace: "National Palace Museum Bulletin 31.4–5 (1996): 1–25.",
				textIds: [],
				manuscriptIds: [],
				tags: ["Tangut art", "Yü-lin Cave", "stūpa", "Uṣṇīṣavijayā"],
				url: "https://www.academia.edu/2646445/Ushn%C4%ABshavijay%C4%81_and_the_Tangut_Cult_of_the_St%C5%ABpa_at_Y%C3%BC_lin_Cave_3",
				publicationNotes: "",
			},
			{
				publicationId: 6,
				authors: ["Linrothe R."],
				publicationTitle: "Xia Renzong and the Patronage of Tangut Buddhist Art: The Stūpa and Ushnīshavijayā Cult.",
				publicationPlace: "Journal of Sung-Yuan Studies (宋遼金元) 28 (1998): 91–121.",
				textIds: [],
				manuscriptIds: [],
				tags: ["Tangut art", "stūpa", "Uṣṇīṣavijayā", "Renzong", "Baisikou 拜寺口 pagoda", "108 stūpas", "Düsum Khyenpa (1st Karmapa)", "Tsangpopa"],
				url: "https://www.jstor.org/stable/23496064",
				publicationNotes: "We can then identify three desiderata within visible acts of patronage: state-protection and legitimization, which are publicly directed; the promotion of a credible Aśokan ideological portrait, which is simultaneously public, personal and in a sense archaeological; and the purely private soteriological resonances, which were directed at personal salvation. (p. 94)<br>The objects inside the Baisigou Square Stupa were probably placed there soon after 1180. One other object found in the rubble may perhaps be connected to the sixtieth birthday celebrations of 1184: it is another printed dharani (prayer) text, the Ushnishavijaya dharani with an image of Ushnishavijaya surrounded by the Sanskrit text (Fig. 3). (p. 96–97).<br>The Ushnishavijaya dharani was well-known in Japan and China, but in East Asia the personified image is extremely rare. Instead, the dharani alone served as the ritual focus. Both Chinese and Sanskrit versions were engraved onto dharani pillars in China.[22] The dharani, if not the personification, is well attested in north-central China in general, in Dali (Yunnan), Liao and Jin contexts in particular, and even Yuan.[23] The original religious context of Ushnishavijaya was certainly cult Mahayana, but it proved to be of interest to those practicing Esoteric Buddhism in China as well. This is demonstrated by both textual and visual evidence. First, there are retranslations of the sutra after Buddhapali’s version of 683 by the eighth century Esoteric masters Subhakarasimha (d. 735, T. 973) and Amoghavajra (705-774, T. 972). Then there are the finds of (non-personified) Ushnlshavijaya mandala at Dunhuang,[24] and finally, the mandala-like contexts surrounding the dharani inscribed in both Sanskrit and Chinese the Dali kingdom of Yunnan.[25](p. 98–99)<br>For reasons which are still not clear to me, the personified form is virtually unknown in East Asia apart from later Tibetan-inspired examples. This is true despite the fact that her description is given in great detail by the versions of the which continued to be translated into Chinese. These descriptions correspond loosely to the few images which are attested in India, but much more closely to the plentiful images in Nepalese, Tibetan and Tangut Xia contexts.[26] In the textual descriptions she is associated with stupa building; indeed, she is described as residing within the womb of the stupa. One of the Chinese translations of her sadhana ritual texts, made in 994 and probably available to the Tanguts, repeatedly instructs the practitioner to make a stupa, paint her image within the dharanl, and place this inside the stupa.[27] Three-faced and eight-armed, she carries a bow and an arrow, a noose, a crossed- or vishva-vajra in front of her chest, a vase full of amrit in her lap, and she makes the abhaya and varada mudras. Perhaps her most distinctive attribute is that she carries a small image of Amitabha Buddha in her upper right hand. In a few examples, instead of carrying it at her shoulder, she is shown placing the Buddha image on her head. Her body and main head is white, while the other heads are yellow and dark blue. [28] (p. 99–100)<br>Considering Ushnlshavijaya’s rather specialized iconography, a surprisingly generous number of Ushnishavijaya texts and images were recovered from Khara Khoto by Kozlov and then by Aurel Stein. These include two mandalas painted on wood panels in the Himalayan style, dated to the late twelfth or early thirteenth century, in which she is clearly seated within a stupa; a similarly dated painting on wood that was meant to be inserted into a seating of some sort (it has been suggested that it was structurally connected to a stupa); and the upper portion of a Himalayan-style printed image now in New Delhi[29] (Fig. 4). Here again she is clearly seated inside the stupa.(p. 100)<br>",
			},
			{
				publicationId: 7,
				authors: ["Jacques G."],
				publicationTitle: "Deux noms tangoutes dans une légende tibétaine.",
				publicationPlace: "Revue d’Etudes Tibétaines numéro treize — Février 2008: 4–10.",
				textIds: [],
				manuscriptIds: [],
				tags: ["Red Annals", "origin of the Tangut emperors"],
				url: "https://shs.hal.science/halshs-00261709/document",
				publicationNotes: "translation into French",
			},
			{
				publicationId: 8,
				authors: ["Stoddard H."],
				publicationTitle: "The nine brothers of the White High. On the ‘remembering’ of history and the creation of gods.",
				publicationPlace: "Les habitants du toit du monde, études recueillies en hommage à Alexander Macdonald. Nanterre : société d’ethnologie, 1997. P. 75–109.",
				textIds: [],
				manuscriptIds: [],
				tags: ["Red Annals", "origin of the Tangut emperors", "Clear Mirror", "Yarlungpa's history", "Feast of the Wise"],
				url: "",
				publicationNotes: "translation into English",
			},
			{
				publicationId: 9,
				authors: ["Stein R. A."],
				publicationTitle: "Mi-ñag et Si-hia. Géographie historique et légendes ancestrales.",
				publicationPlace: "Bulletin de l'École française d'Extrême-Orient. Année 1951, 44-1: 223–265.",
				textIds: [],
				manuscriptIds: [],
				tags: ["history", "origin of the Tangut emperors", "place names"],
				url: "https://www.persee.fr/doc/befeo_0336-1519_1951_num_44_1_5048",
				publicationNotes: "",
			},
			{
				publicationId: 10,
				authors: ["Sørensen P."],
				publicationTitle: "The Mirror Illuminating The Royal Genealogies. An Annotated Translation of the XIVth Century Tibetan Chronicle: rGyal rabs gsal ba'i me long.",
				publicationPlace: "Wiesbaden: Harrassowitz Verlag, 1994.",
				textIds: [],
				manuscriptIds: [],
				tags: ["Clear Mirror", "origin of the Tangut emperors"],
				url: "https://www.academia.edu/43156728/The_Mirror_Illuminating_The_Royal_Genealogies_An_Annotated_Translation_of_the_XIVth_Century_Tibetan_Chronicle_rGyal_rabs_gsal_bai_me_long",
				publicationNotes: "",
			},
			// Add additional publications here
		];

		document.addEventListener("DOMContentLoaded", function() {
		  // Assuming getTextReferences is called here to update something on the page after content is confirmed loaded
		});
		
		function getPublicationReference(publicationIds) {
			const publicationReferences = publicationIds.map(publicationId => {
				// Find the publication by ID
				const publication = publications.find(pub => pub.publicationId === publicationId);
				// If publication is found
				if (publication) {
					// Extract surnames
					const surnames = publication.authors.map(author => {
						const parts = author.split(' '); // Split the author name into parts
						return parts[0]; // Assuming the first part is the surname
					}).join(', '); // Join the surnames with a comma

					const yearMatch = publication.publicationPlace.match(/\d{4}/); // Extract year
					const year = yearMatch ? yearMatch[0] : 'Unknown Year';

					return `<a href="#publication-${publicationId}">${surnames} ${year}</a>`;
				} else {
					return `Unknown Publication ${publicationId}`;
				}
			});
			return publicationReferences.join('; ');
		}

		function getManuscriptReference(manuscriptIds) {
			const manuscriptReferences = manuscriptIds.map(manuscriptId => {
				// Find the manuscript by ID
				const manuscript = manuscripts.find(ms => ms.manuscriptId === manuscriptId);
				// Use the shelfmark as the link text, if the manuscript is found
				if (manuscript) {
					return `<a href="#manuscript-${manuscriptId}">${manuscript.shelfmark}</a>`;
				} else {
					return `Unknown Manuscript ${manuscriptId}`;
				}
			});
			return manuscriptReferences.join('; ');
		}
		
		function getTextReferences(textIds) {
			const textReferences = textIds.map(textId => {
				const text = texts.find(txt => txt.textId === textId);
				if (text) {
					return `<a href="#text-${textId}">${text.textTitle}</a>`;
				} else {
					return `Unknown text ${textId}`;
				}
			});
			return textReferences.join('; ');
		}
		
		function createTagButtons() {
			const tagsContainer = document.getElementById('tagsContainer');
			const allTags = publications.flatMap(pub => pub.tags); // Flatten the tags array from all publications
			const uniqueTags = [...new Set(allTags)]; // Create a unique set of tags

			uniqueTags.forEach(tag => {
				const button = document.createElement('button');
				button.textContent = tag;
				button.onclick = () => filterPublicationsByTag(tag);
				tagsContainer.appendChild(button);
			});
		}

		function filterPublicationsByTag(tag) {
			const filteredPublicationsContainer = document.getElementById('filteredPublicationsContainer');
			filteredPublicationsContainer.innerHTML = ''; // Clear previous results

			const filteredPublications = publications.filter(pub => pub.tags.includes(tag));
			filteredPublications.forEach(publication => {
				const publicationEl = document.createElement('div');
				publicationEl.classList.add('publication-item');
				let publicationHtml = `<h3>${publication.publicationTitle}</h3>
									   <p><span class="label-authors">Authors:</span> ${publication.authors.join(', ')}</p>
									   <p><span class="label-place">Place:</span> ${publication.publicationPlace}</p>`;
				if (publication.tags.length > 0) {
					publicationHtml += `<p><span class="label-tags">Tags:</span> ${publication.tags.join(', ')}</p>`;
				}
				if (publication.url) {
					publicationHtml += `<a href="${publication.url}" target="_blank">Download</a>`;
				}
				if (publication.publicationNotes) {
					publicationHtml += `<p><span class="label-pub-notes">Notes:</span> ${publication.publicationNotes}</p>`;
				}
				if (publication.textIds.length > 0) {
					publicationHtml += `<p><span class="manuscript-texts">Texts:</span> ${getTextReferences(publication.textIds)}</p>`;
				}
				if (publication.manuscriptIds.length > 0) {
					publicationHtml += `<p><span class="label-manuscripts">Sources:</span> ${getManuscriptReference(publication.manuscriptIds)}</p>`;
				}
				publicationEl.innerHTML = publicationHtml;
				filteredPublicationsContainer.appendChild(publicationEl);
			});
		}
		
		// Corrected displayData function to append to publicationsContainer correctly
		function displayData() {
			const textsContainer = document.getElementById('textsContainer');
			const textsCount = document.getElementById('textsCount');
			createTagButtons();
			texts.forEach(text => {
				const textEl = document.createElement('div');
				textEl.classList.add('text-item');
				textEl.setAttribute('id', `text-${text.textId}`);
				let htmlContent = `<h3>${text.textTitle}</h3>`;
				if (text.textAlternativeTitle) {
					htmlContent += `<p><span class="label-alternative-titles">Alternative Titles:</span> ${text.textAlternativeTitle}</p>`;
				}
				if (text.textNotes) {
					htmlContent += `<p><span class="label-notes">Notes:</span> ${text.textNotes}</p>`;
				}
				htmlContent += `<p><span class="label-manuscripts">Sources:</span> ${getManuscriptReference(text.manuscriptIds)}</p>`;
				htmlContent += `<p><span class="label-publications">Publications:</span> ${getPublicationReference(text.publicationIds)}</p>`;
				textEl.innerHTML = htmlContent;
				textsContainer.appendChild(textEl);
			});
			textsCount.textContent = `: ${texts.length}`;

			const manuscriptsContainer = document.getElementById('manuscriptsContainer');
			const manuscriptsCount = document.getElementById('manuscriptsCount');
			manuscripts.forEach(manuscript => {
				const manuscriptEl = document.createElement('div');
				manuscriptEl.classList.add('manuscript-item');
				manuscriptEl.setAttribute('id', `manuscript-${manuscript.manuscriptId}`);
				let manuscriptHtml = `<h3>${manuscript.manuscriptTitle}</h3>
									  <p><span class="label-collection">Collection:</span> ${manuscript.collection.join(', ')}</p>
									  <p><span class="label-shelfmark">Shelfmark:</span> ${manuscript.shelfmark}</p>`;
				if (manuscript.manuscriptNotes) {
					manuscriptHtml += `<p><span class="manuscript-notes">Notes:</span> ${manuscript.manuscriptNotes}</p>`;
				}
				if (manuscript.textIds.length > 0) {
					manuscriptHtml += `<p><span class="manuscript-texts">Texts:</span> ${getTextReferences(manuscript.textIds)}</p>`;
				}
				if (manuscript.publicationIds.length > 0) {
					manuscriptHtml += `<p><span class="manuscript-publications">Publications:</span> ${getPublicationReference(manuscript.publicationIds)}</p>`;
				}
				manuscriptEl.innerHTML = manuscriptHtml;
				manuscriptsContainer.appendChild(manuscriptEl);
			});
			manuscriptsCount.textContent = `: ${manuscripts.length}`;

		const publicationsContainer = document.getElementById('publicationsContainer');
		const publicationsCount = document.getElementById('publicationsCount');
		publications.forEach(publication => {
			const publicationEl = document.createElement('div');
			publicationEl.classList.add('publication-item');
			publicationEl.setAttribute('id', `publication-${publication.publicationId}`);
			let publicationHtml = `<h3>${publication.publicationTitle}</h3>
								   <p><span class="label-authors">Authors:</span> ${publication.authors.join(', ')}</p>
								   <p><span class="label-place">Place:</span> ${publication.publicationPlace}</p>`;
			if (publication.tags.length > 0) {
				publicationHtml += `<p><span class="label-tags">Tags:</span> ${publication.tags.join(', ')}</p>`;
			}
			if (publication.url) {
				publicationHtml += `<a href="${publication.url}" target="_blank">Download</a>`;
			}
			if (publication.publicationNotes) {
				publicationHtml += `<p><span class="label-pub-notes">Notes:</span> ${publication.publicationNotes}</p>`;
			}
			if (publication.textIds.length > 0) {
				publicationHtml += `<p><span class="manuscript-texts">Texts:</span> ${getTextReferences(publication.textIds)}</p>`;
			}
			if (publication.manuscriptIds.length > 0) {
				publicationHtml += `<p><span class="label-manuscripts">Sources:</span> ${getManuscriptReference(publication.manuscriptIds)}</p>`;
			}
			publicationEl.innerHTML = publicationHtml;
			publicationsContainer.appendChild(publicationEl);
		});
		publicationsCount.textContent = `: ${publications.length}`;
		}
        window.onload = displayData;
    </script>
</body>
</html>