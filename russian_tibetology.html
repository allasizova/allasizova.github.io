<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Библиография по тибетологии</title>
    <style>
        .biblio-entry {
            margin-bottom: 20px;
            border: 1px solid #ddd;
            padding: 10px;
            background-color: #73D0F0;
        }
        .filter-section {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>Список публикаций по тибетологии и тибетско-монгольскому буддизму российских или аффилированных с российскими научными учреждениями авторов: 1730 – 2022 гг.</h1>
    <div class="filter-section">
        <div id="authorFilters"><b>Авторы:</b></div>
        <div id="hashtagFilters"><b>Хэштеги:</b></div>
        <label for="sortOrder"><b>Сортировка по году:</b></label>
        <select id="sortOrder">
            <option value="asc">По возрастанию</option>
            <option value="desc">По убыванию</option>
        </select>
        <button onclick="applyFilters()">Применить фильтры</button>
    </div>
    <div id="biblioContainer"></div>

    <script>
        const bibliographicEntries = [
            {
                authors: [],
                editors: ["Лепехов С. Ю."],
                title: "Агван Доржиев — выдающийся политический, общественный, религиозный деятель и видный российский дипломат.",
				periodical: "",
                type: "Сборник статей",
                placeOfPublication: "Улан-Удэ: ИПК ФГОУ ВПО ВСГАКИ.",
                hashtags: ["#Агван Доржиев", "#Бурятия"],
                url: "",
                year: 2007
            },
            {
                authors: [],
                editors: ["Вертоградова В. В.", "Исаева Н. В.", "Кулланда С. В."],
                title: "Буддизм. История и культура.",
				periodical: "",
                type: "Сборник статей",
                placeOfPublication: "М.: Наука, ГРВЛ.",
                hashtags: ["#буддизм"],
                url: "https://archive.org/details/6yggu3m_UcTopu9I_u_KuJIbTupa",
                year: 1989
            },
            // Пример записи с пустыми полями для демонстрации
            {
                authors: ["Абаева Л. Л.", "Андросов В. П.", "Бакаева Э. П.", "Благов С. А.", "Бухаев Ю. Г.", "Волков С. В.", "Жуковская Н. Л.", "Игнатович А. Н.", "Кабанов А. М.", "Канаева Н. А.", "Каратыгина М. И.", "Корнев В. И.", "Малявин В. В.", "Монтлевич В. М.", "Мялль Л. Э.", "Огнева Е. Д.", "Сафронова Е. С.", "Светлов Г. Е.", "Ставиский Б. Я.", "Терентьев А. А.", "Торчинов Е. А.", "Фурцева Л. Р."],
                editors: ["Жуковская Н. Л.", "Игнатович А. Н.", "Корнев В.И."],
                title: "Буддизм: Словарь.",
                type: "Словарь",
				periodical: "",
                placeOfPublication: "М.: Изд-во «Республика».",
                hashtags: ["#буддизм"],
                url: "https://phototour.pro/library/tibet/72/",
                year: 1992
            },
			{
                authors: ["Абаева Л. Л."],
                editors: ["Жуковская Н. Л."],
                title: "Религиозная культура монгольских народов в векторе буддийских традиций.",
				periodical: "",
                type: "Монография",
                placeOfPublication: "Улан-Удэ: Бурят-Монгол ном.",
                hashtags: ["#буддизм", "#монгольские народы"],
                url: "https://elibrary.ru/item.asp?id=42436823",
                year: 2018
            },
			{
                authors: ["Абаева Л. Л."],
                editors: [""],
                title: "Буддийская культура и ее концепты в мировоззрении Агвана Доржиева.",
				periodical: "Власть. 2012, № 4. С. 137–139.",
                type: "Статья",
                placeOfPublication: "",
                hashtags: ["#буддизм", "#Агван Доржиев"],
                url: "https://cyberleninka.ru/article/n/buddiyskaya-kultura-i-ee-kontsepty-v-mirovozrenii-agvana-dorzhieva",
                year: 2012
            },
            // Добавьте дополнительные записи здесь
        ];

        function displayBibliographicEntries(entries) {
			const container = document.getElementById('biblioContainer');
			container.innerHTML = '';

			entries.forEach(entry => {
				const entryElement = document.createElement('div');
				entryElement.classList.add('biblio-entry');
				let innerHTML = '';
				
				if (entry.authors.length > 0) {
					innerHTML += `<p>Авторы: ${entry.authors.join(", ")}</p>`;
				}
				if (entry.editors.join(", ") !== "") {
					innerHTML += `<p>Редакторы: ${entry.editors.join(", ")}</p>`;
				}
				innerHTML += `<p>Название: ${entry.title}</p>`;
				if (entry.periodical) { // Проверка и добавление нового поля
					innerHTML += `<p>В: ${entry.periodical}</p>`;
				}
				innerHTML += `<p>Тип: ${entry.type}</p>`;
				if (entry.placeOfPublication !== "") {
					innerHTML += `<p>Место издания: ${entry.placeOfPublication}</p>`;
				}
				if (entry.year) {
					innerHTML += `<p>Год: ${entry.year}</p>`;
				}
				if (entry.hashtags.length > 0) {
					innerHTML += `<p>Хэштеги: ${entry.hashtags.join(" ")}</p>`;
				}
				if (entry.url) {
					innerHTML += `<p>URL: <a href="${entry.url}" target="_blank">Перейти к источнику</a></p>`;
				}
				
				entryElement.innerHTML = innerHTML;
				container.appendChild(entryElement);
			});
		}

         function initFilters() {
            const authors = new Set();
            const hashtags = new Set();
            bibliographicEntries.forEach(entry => {
                entry.authors.forEach(author => authors.add(author));
                entry.hashtags.forEach(hashtag => hashtags.add(hashtag));
            });

            const authorFiltersDiv = document.getElementById('authorFilters');
            authors.forEach(author => {
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = `author-${author}`;
                checkbox.name = 'author';
                checkbox.value = author;

                const label = document.createElement('label');
                label.htmlFor = `author-${author}`;
                label.textContent = author;

                authorFiltersDiv.appendChild(checkbox);
                authorFiltersDiv.appendChild(label);
                authorFiltersDiv.appendChild(document.createElement('br'));
            });

            const hashtagFiltersDiv = document.getElementById('hashtagFilters');
            hashtags.forEach(hashtag => {
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = `hashtag-${hashtag}`;
                checkbox.name = 'hashtag';
                checkbox.value = hashtag;

                const label = document.createElement('label');
                label.htmlFor = `hashtag-${hashtag}`;
                label.textContent = hashtag;

                hashtagFiltersDiv.appendChild(checkbox);
                hashtagFiltersDiv.appendChild(label);
                hashtagFiltersDiv.appendChild(document.createElement('br'));
            });
        }
		
		function applyFilters() {
            const selectedAuthors = Array.from(document.querySelectorAll('input[name="author"]:checked')).map(el => el.value);
            const selectedHashtags = Array.from(document.querySelectorAll('input[name="hashtag"]:checked')).map(el => el.value);
            const sortOrder = document.getElementById('sortOrder').value;

            let filteredEntries = bibliographicEntries.filter(entry => 
                (selectedAuthors.length === 0 || entry.authors.some(author => selectedAuthors.includes(author))) &&
                (selectedHashtags.length === 0 || entry.hashtags.some(hashtag => selectedHashtags.includes(hashtag)))
            );

            filteredEntries = filteredEntries.sort((a, b) => {
                return sortOrder === 'asc' ? a.year - b.year : b.year - a.year;
            });

            displayBibliographicEntries(filteredEntries);
        }

        document.addEventListener('DOMContentLoaded', () => {
            initFilters();
            applyFilters(); // Показать все записи по умолчанию
        });
    </script>
</body>
</html>