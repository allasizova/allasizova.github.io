<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Библиографические записи</title>
    <style>
        .biblio-entry {
            margin-bottom: 20px;
            border: 1px solid #ddd;
            padding: 10px;
            background-color: #73D0F0;
        }
        .filter-section {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>Библиографические записи</h1>
    <div class="filter-section">
        <div id="authorFilters"><b>Авторы:</b></div>
        <div id="hashtagFilters"><b>Хэштеги:</b></div>
        <label for="sortOrder"><b>Сортировка по году:</b></label>
        <select id="sortOrder">
            <option value="asc">По возрастанию</option>
            <option value="desc">По убыванию</option>
        </select>
        <button onclick="applyFilters()">Применить фильтры</button>
    </div>
    <div id="biblioContainer"></div>

    <script>
        const bibliographicEntries = [
            {
                authors: ["Иван Иванов", "Петр Петров"],
                editors: ["Александр Смирнов"],
                title: "Исследование А",
                type: "Книга",
                hashtags: ["#наука", "#образование", "#тибетология"],
                url: "http://example.com/book1",
                year: 2020
            },
            {
                authors: ["Алексей Алексеев"],
                editors: ["Мария Иванова"],
                title: "Разработка Б",
                type: "Статья",
                hashtags: ["#технологии", "#инновации"],
                url: "http://example.com/article1",
                year: 2021
            }
            // Добавьте дополнительные записи здесь
        ];

        function displayBibliographicEntries(entries) {
            const container = document.getElementById('biblioContainer');
            container.innerHTML = '';

            entries.forEach(entry => {
                const entryElement = document.createElement('div');
                entryElement.classList.add('biblio-entry');
                entryElement.innerHTML = `
                    <p>Авторы: ${entry.authors.join(", ")}</p>
                    <p>Редакторы: ${entry.editors.join(", ")}</p>
                    <p>Название: ${entry.title}</p>
                    <p>Тип: ${entry.type}</p>
                    <p>Год: ${entry.year}</p>
                    <p>Хэштеги: ${entry.hashtags.join(" ")}</p>
                    <p>URL: <a href="${entry.url}" target="_blank">Перейти к источнику</a></p>`;
                container.appendChild(entryElement);
            });
        }

        function initFilters() {
            const authors = new Set();
            const hashtags = new Set();
            bibliographicEntries.forEach(entry => {
                entry.authors.forEach(author => authors.add(author));
                entry.hashtags.forEach(hashtag => hashtags.add(hashtag));
            });

            const authorFiltersDiv = document.getElementById('authorFilters');
            authors.forEach(author => {
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = `author-${author}`;
                checkbox.name = 'author';
                checkbox.value = author;

                const label = document.createElement('label');
                label.htmlFor = `author-${author}`;
                label.textContent = author;

                authorFiltersDiv.appendChild(checkbox);
                authorFiltersDiv.appendChild(label);
                authorFiltersDiv.appendChild(document.createElement('br'));
            });

            const hashtagFiltersDiv = document.getElementById('hashtagFilters');
            hashtags.forEach(hashtag => {
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = `hashtag-${hashtag}`;
                checkbox.name = 'hashtag';
                checkbox.value = hashtag;

                const label = document.createElement('label');
                label.htmlFor = `hashtag-${hashtag}`;
                label.textContent = hashtag;

                hashtagFiltersDiv.appendChild(checkbox);
                hashtagFiltersDiv.appendChild(label);
                hashtagFiltersDiv.appendChild(document.createElement('br'));
            });
        }

        function applyFilters() {
            const selectedAuthors = Array.from(document.querySelectorAll('input[name="author"]:checked')).map(el => el.value);
            const selectedHashtags = Array.from(document.querySelectorAll('input[name="hashtag"]:checked')).map(el => el.value);
            const sortOrder = document.getElementById('sortOrder').value;

            let filteredEntries = bibliographicEntries.filter(entry => 
                (selectedAuthors.length === 0 || entry.authors.some(author => selectedAuthors.includes(author))) &&
                (selectedHashtags.length === 0 || entry.hashtags.some(hashtag => selectedHashtags.includes(hashtag)))
            );

            filteredEntries = filteredEntries.sort((a, b) => {
                return sortOrder === 'asc' ? a.year - b.year : b.year - a.year;
            });

            displayBibliographicEntries(filteredEntries);
        }

        document.addEventListener('DOMContentLoaded', () => {
            initFilters();
            applyFilters(); // Показать все записи по умолчанию
        });
    </script>
</body>
</html>
